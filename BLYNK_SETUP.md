# Blynk APP 配置指南

本指南将帮助您配置Blynk手机APP，实现远程监控和控制蝴蝶孵化箱。

## 第一步：安装Blynk APP

1. 在手机应用商店搜索 **"Blynk"**
2. 下载并安装Blynk APP（支持iOS和Android）
3. 打开APP并注册账号（或使用现有账号登录）

## 第二步：创建新项目

1. 点击 **"Create New Project"**（创建新项目）
2. **项目名称**：输入 "蝴蝶孵化箱" 或 "Butterfly Incubator"
3. **选择硬件**：选择 **ESP32**
4. **连接类型**：选择 **WiFi**
5. 点击 **"Create"**（创建）

## 第三步：获取Auth Token

1. 创建项目后，Blynk会发送一封包含 **Auth Token** 的邮件到您的注册邮箱
2. 或者，在项目设置中可以直接查看和复制Auth Token
3. **重要**：将Auth Token复制到代码中的 `BLYNK_AUTH_TOKEN` 定义处

```cpp
#define BLYNK_AUTH_TOKEN "你的Auth Token"
```

## 第四步：添加控件

在Blynk APP中，按照以下配置添加控件：

### 1. 目标温度设置（V0）

- **控件类型**：Slider（滑块）
- **名称**：目标温度
- **虚拟引脚**：V0
- **设置**：
  - 最小值：10
  - 最大值：40
  - 步进：0.5
  - 单位：°C

### 2. 目标湿度设置（V1）

- **控件类型**：Slider（滑块）
- **名称**：目标湿度
- **虚拟引脚**：V1
- **设置**：
  - 最小值：20
  - 最大值：95
  - 步进：5
  - 单位：%

### 3. 当前温度显示（V2）

**方式一：使用超级图表（推荐）**
- **控件类型**：SuperChart（超级图表）
- **名称**：温度曲线
- **虚拟引脚**：V2
- **设置**：
  - 数据流：V2
  - 图表类型：Line（折线图）
  - Y轴范围：0-50
  - 更新频率：1秒

**方式二：使用仪表**
- **控件类型**：Gauge（仪表）
- **名称**：当前温度
- **虚拟引脚**：V2
- **设置**：
  - 最小值：0
  - 最大值：50
  - 单位：°C

**方式三：使用标签**
- **控件类型**：Label（标签）
- **名称**：当前温度
- **虚拟引脚**：V2
- **设置**：
  - 格式：%.1f °C

### 4. 当前湿度显示（V3）

**方式一：使用超级图表（推荐）**
- **控件类型**：SuperChart（超级图表）
- **名称**：湿度曲线
- **虚拟引脚**：V3
- **设置**：
  - 数据流：V3
  - 图表类型：Line（折线图）
  - Y轴范围：0-100
  - 更新频率：1秒

**方式二：使用仪表**
- **控件类型**：Gauge（仪表）
- **名称**：当前湿度
- **虚拟引脚**：V3
- **设置**：
  - 最小值：0
  - 最大值：100
  - 单位：%

**方式三：使用标签**
- **控件类型**：Label（标签）
- **名称**：当前湿度
- **虚拟引脚**：V3
- **设置**：
  - 格式：%.0f %

### 5. 目标温度显示（V4）

- **控件类型**：Label（标签）
- **名称**：目标温度
- **虚拟引脚**：V4
- **设置**：
  - 格式：%.1f °C

### 6. 目标湿度显示（V5）

- **控件类型**：Label（标签）
- **名称**：目标湿度
- **虚拟引脚**：V5
- **设置**：
  - 格式：%.0f %

### 7. 加热状态指示（V6）

- **控件类型**：LED（LED指示灯）
- **名称**：加热状态
- **虚拟引脚**：V6
- **设置**：
  - ON值：1
  - OFF值：0
  - 颜色：红色（可选）

### 8. 加湿状态指示（V7）

- **控件类型**：LED（LED指示灯）
- **名称**：加湿状态
- **虚拟引脚**：V7
- **设置**：
  - ON值：1
  - OFF值：0
  - 颜色：蓝色（可选）

## 第五步：布局建议

建议的APP界面布局：

```
┌─────────────────────────┐
│   蝴蝶孵化箱监控系统      │
├─────────────────────────┤
│  [温度曲线图 - V2]       │
│  [湿度曲线图 - V3]       │
├─────────────────────────┤
│  当前温度: [V2标签]      │
│  当前湿度: [V3标签]      │
│  目标温度: [V4标签]      │
│  目标湿度: [V5标签]      │
├─────────────────────────┤
│  目标温度: [V0滑块]      │
│  目标湿度: [V1滑块]      │
├─────────────────────────┤
│  加热: [V6 LED]         │
│  加湿: [V7 LED]         │
└─────────────────────────┘
```

## 第六步：测试连接

1. 确保ESP32-C3已连接到WiFi
2. 确保代码中已正确配置Auth Token
3. 上传代码到ESP32-C3
4. 打开Blynk APP，进入项目
5. 点击右上角的 **"Play"**（播放）按钮启动项目
6. 如果连接成功，您应该能看到实时数据更新

## 常见问题

### Blynk连接失败

1. **检查Auth Token**：确保代码中的Auth Token与APP中的一致
2. **检查WiFi连接**：确保ESP32-C3已连接到互联网
3. **检查Blynk服务器**：某些地区可能需要使用Blynk私有服务器
4. **查看串口输出**：打开Arduino IDE的串口监视器查看连接状态

### 数据不更新

1. **检查虚拟引脚**：确保APP中的虚拟引脚与代码中一致
2. **检查更新频率**：代码中每5秒更新一次Blynk数据
3. **重启APP**：尝试关闭并重新打开Blynk APP
4. **检查网络**：确保手机和ESP32都在同一网络或都能访问互联网

### 无法控制设备

1. **检查写入权限**：确保V0和V1控件设置为可写入（Writable）
2. **检查数值范围**：确保设置的值在有效范围内（温度10-40°C，湿度20-95%）
3. **查看串口输出**：检查是否收到Blynk的写入命令

## Blynk能量限制

**注意**：免费版Blynk有能量限制（Energy Limit）

- 每个控件消耗一定能量
- 超级图表消耗较多能量
- 如果能量不足，可以：
  1. 升级到付费版
  2. 减少控件数量
  3. 使用更简单的控件类型（标签代替图表）

## 高级功能（可选）

### 添加通知

1. 添加 **Notification**（通知）控件
2. 在代码中使用 `Blynk.notify("消息内容")` 发送通知
3. 可以设置温度/湿度超出范围时发送警报

### 添加历史数据

1. 使用Blynk的 **History Graph**（历史图表）控件
2. 可以查看更长时间的历史数据
3. 需要Blynk Cloud Plus订阅

## 技术支持

如果遇到问题：
1. 查看Blynk官方文档：https://docs.blynk.io/
2. 检查代码中的串口输出
3. 查看Blynk APP中的设备连接状态

